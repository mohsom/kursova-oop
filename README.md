# Система управління підписками SaaS

Демонстраційна система управління підписками для курсової роботи з ООП.

## Структура проекту

```
├── src/                    # Backend (Node.js + TypeScript + Express)
│   ├── api/               # API роути
│   ├── database/          # Робота з базою даних
│   ├── models/           # Моделі даних
│   └── webhooks/         # Обробка webhook'ів
├── frontend/             # Frontend (React + TypeScript)
│   ├── src/
│   │   ├── components/   # React компоненти
│   │   ├── services/    # API сервіси
│   │   └── types/       # TypeScript типи
│   └── public/          # Статичні файли
└── data/                # JSON файли з даними
```

## Функціональність

### Backend API

- ✅ Створення та управління користувачами
- ✅ Управління планами підписок
- ✅ Створення та управління підписками
- ✅ Обробка транзакцій
- ✅ Webhook обробка
- ✅ Статистика транзакцій

### Frontend WebApp

- ✅ **Сторінка користувачів** - таблиця з користувачами, додавання нових, колонки: email, ім'я, назва плану, статус плану, дата закінчення
- ✅ **Сторінка планів** - додавання нових планів, відображення у вигляді карток з ID, назвою, ціною, періодом (місяць/рік)
- ✅ **Симуляція оплати** - вибір користувача та плану, автоматичний розрахунок суми, стиль як у платіжних системах
- ✅ **Статистика** - використання recharts для відображення line chart транзакцій

## Встановлення та запуск

### 1. Швидкий запуск

```bash
# Встановлення всіх залежностей
npm run setup

# Запуск обох серверів одночасно
npm run dev:full

# Або використати скрипт
./start-demo.sh
```

### 2. Ручне встановлення

```bash
# Встановлення залежностей для backend
npm install

# Встановлення залежностей для frontend
npm run frontend:install
```

### 3. Налаштування environment змінних

Система автоматично створить `.env` файли з налаштуваннями за замовчуванням:

**Backend (.env):**

```env
PORT=3001
NODE_ENV=development
API_BASE_URL=http://localhost:3001/api
CORS_ORIGIN=http://localhost:3000
```

**Frontend (frontend/.env):**

```env
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_PORT=3000
```

### 4. Запуск серверів

```bash
# Backend сервер
npm run dev

# Frontend додаток (в новому терміналі)
npm run frontend

# Або обидва одночасно
npm run dev:full
```

**URL адреси:**

- Frontend: `http://localhost:3000`
- Backend API: `http://localhost:3001`

## Використання (Paddle Style Workflow)

### 1. Створення плану підписки

- Перейдіть на вкладку "Плани"
- Натисніть "Додати план"
- Заповніть назву, опис, ціну в USD та період (місяць/рік)
- Додайте функції плану
- Натисніть "Створити"

### 2. Створення користувача

- Перейдіть на вкладку "Користувачі"
- Натисніть "Додати користувача"
- Заповніть ім'я та email
- Натисніть "Створити"

### 3. Paddle Style Оплата

- Перейдіть на вкладку "Paddle Оплата"
- Оберіть користувача зі списку
- Оберіть план підписки
- Система автоматично розрахує вартість
- Натисніть "Оплатити" (90% шанс успіху)
- Після успішної оплати підписка автоматично активується

### 4. Перевірка ліцензій

- Перейдіть на вкладку "Ліцензії"
- Оберіть користувача для перевірки
- Переглядайте статус підписок та дати закінчення
- Система показує коли підписка закінчується

### 5. Статистика

- Перейдіть на вкладку "Статистика"
- Переглядайте графіки доходів по місяцях
- Аналізуйте успішність транзакцій
- Фільтруйте по користувачах або планах

### Додаткові функції

- **Управління підписками** - перегляд всіх підписок в системі
- **Симуляція оплати** - альтернативний спосіб створення транзакцій

## API Endpoints

### Користувачі

- `GET /api/users` - Отримати всіх користувачів
- `GET /api/users/:id` - Отримати користувача за ID
- `POST /api/users` - Створити користувача
- `PUT /api/users/:id` - Оновити користувача
- `DELETE /api/users/:id` - Видалити користувача

### Плани підписок

- `GET /api/plans` - Отримати всі плани
- `GET /api/plans/:id` - Отримати план за ID
- `POST /api/plans` - Створити план
- `PUT /api/plans/:id` - Оновити план
- `DELETE /api/plans/:id` - Видалити план

### Підписки

- `GET /api/subscriptions` - Отримати всі підписки
- `GET /api/subscriptions/:id` - Отримати підписку за ID
- `GET /api/users/:userId/subscriptions` - Підписки користувача
- `POST /api/subscriptions` - Створити підписку
- `PUT /api/subscriptions/:id` - Оновити підписку
- `POST /api/subscriptions/:id/cancel` - Скасувати підписку

### Транзакції

- `GET /api/transactions` - Отримати всі транзакції
- `GET /api/transactions/:id` - Отримати транзакцію за ID
- `GET /api/users/:userId/transactions` - Транзакції користувача
- `GET /api/subscriptions/:subscriptionId/transactions` - Транзакції підписки
- `POST /api/transactions` - Створити транзакцію
- `POST /api/transactions/:id/complete` - Завершити транзакцію
- `POST /api/transactions/:id/fail` - Позначити як невдалу
- `GET /api/transactions/stats` - Статистика транзакцій

## Технології

### Backend

- **Node.js** - JavaScript runtime
- **TypeScript** - Типізація
- **Express** - Web framework
- **JSON Database** - Простий файловий сховище

### Frontend

- **React 18** - UI бібліотека
- **TypeScript** - Типізація
- **Material-UI (MUI)** - Компоненти UI
- **React Router** - Маршрутизація
- **Axios** - HTTP клієнт
- **Recharts** - Графіки та діаграми

## Особливості реалізації

### Об'єктно-орієнтований підхід

- Класи для сервісів (UserService, SubscriptionService, etc.)
- Інтерфейси для типізації
- Абстракція через DatabaseInterface

### Паттерни проектування

- **Repository Pattern** - для роботи з даними
- **Service Layer** - для бізнес-логіки
- **Factory Pattern** - для створення сервісів

### Webhook система

- Обробка зовнішніх подій
- Валідація payload
- Тестові webhook'и

## Демонстрація

1. **Створіть кількох користувачів**
2. **Додайте різні плани підписок**
3. **Створіть підписки для користувачів**
4. **Проведіть симуляцію оплат**
5. **Перевірте стан ліцензій**
6. **Проаналізуйте статистику**

Система демонструє повний цикл роботи SaaS підписок з сучасним веб-інтерфейсом та детальною аналітикою.

Видалити дублювання даних
