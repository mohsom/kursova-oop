# Система управління підписками SaaS

Демонстраційна система управління підписками для курсової роботи з ООП.

## Структура проекту

```
├── src/                    # Backend (Node.js + TypeScript + Express)
│   ├── api/               # API роути
│   ├── database/          # Робота з базою даних
│   ├── models/           # Моделі даних
│   └── webhooks/         # Обробка webhook'ів
├── frontend/             # Frontend (React + TypeScript)
│   ├── src/
│   │   ├── components/   # React компоненти
│   │   ├── services/    # API сервіси
│   │   └── types/       # TypeScript типи
│   └── public/          # Статичні файли
└── data/                # JSON файли з даними
```

## Функціональність

### Backend API

- ✅ Створення та управління користувачами
- ✅ Управління планами підписок
- ✅ Створення та управління підписками
- ✅ Обробка транзакцій
- ✅ Webhook обробка
- ✅ Статистика транзакцій

### Frontend WebApp

- ✅ **Управління користувачами** - створення, редагування, видалення
- ✅ **Управління підписками** - додавання підписок, скасування
- ✅ **Симуляція оплати** - створення транзакцій з симуляцією успіху/невдачі
- ✅ **Перевірка ліцензій** - перегляд стану підписок користувачів
- ✅ **Статистика з графіками** - візуалізація доходів та транзакцій

## Встановлення та запуск

### 1. Встановлення залежностей

```bash
# Встановлення залежностей для backend
npm install

# Встановлення залежностей для frontend
cd frontend
npm install
cd ..
```

### 2. Запуск backend сервера

```bash
# Розробка (з автоперезавантаженням)
npm run dev

# Або звичайний запуск
npm start
```

Backend буде доступний на `http://localhost:3001`

### 3. Запуск frontend додатку

```bash
# В новому терміналі
npm run frontend
```

Frontend буде доступний на `http://localhost:3000`

## Використання

### 1. Створення користувача

- Перейдіть на вкладку "Користувачі"
- Натисніть "Додати користувача"
- Заповніть ім'я та email
- Натисніть "Створити"

### 2. Додавання підписок

- Перейдіть на вкладку "Підписки"
- Натисніть "Додати підписку"
- Оберіть користувача та план
- Встановіть спосіб оплати та автопродовження
- Натисніть "Створити підписку"

### 3. Симуляція оплати

- Перейдіть на вкладку "Оплата"
- Натисніть "Нова оплата"
- Оберіть підписку для оплати
- Встановіть спосіб оплати та суму
- Натисніть "Провести оплату" (90% шанс успіху)

### 4. Перевірка ліцензій

- Перейдіть на вкладку "Ліцензії"
- Оберіть користувача для перевірки
- Переглядайте статус підписок та дати закінчення

### 5. Статистика

- Перейдіть на вкладку "Статистика"
- Переглядайте графіки доходів по місяцях
- Аналізуйте успішність транзакцій
- Фільтруйте по користувачах або планах

## API Endpoints

### Користувачі

- `GET /api/users` - Отримати всіх користувачів
- `GET /api/users/:id` - Отримати користувача за ID
- `POST /api/users` - Створити користувача
- `PUT /api/users/:id` - Оновити користувача
- `DELETE /api/users/:id` - Видалити користувача

### Плани підписок

- `GET /api/plans` - Отримати всі плани
- `GET /api/plans/:id` - Отримати план за ID
- `POST /api/plans` - Створити план
- `PUT /api/plans/:id` - Оновити план
- `DELETE /api/plans/:id` - Видалити план

### Підписки

- `GET /api/subscriptions` - Отримати всі підписки
- `GET /api/subscriptions/:id` - Отримати підписку за ID
- `GET /api/users/:userId/subscriptions` - Підписки користувача
- `POST /api/subscriptions` - Створити підписку
- `PUT /api/subscriptions/:id` - Оновити підписку
- `POST /api/subscriptions/:id/cancel` - Скасувати підписку

### Транзакції

- `GET /api/transactions` - Отримати всі транзакції
- `GET /api/transactions/:id` - Отримати транзакцію за ID
- `GET /api/users/:userId/transactions` - Транзакції користувача
- `GET /api/subscriptions/:subscriptionId/transactions` - Транзакції підписки
- `POST /api/transactions` - Створити транзакцію
- `POST /api/transactions/:id/complete` - Завершити транзакцію
- `POST /api/transactions/:id/fail` - Позначити як невдалу
- `GET /api/transactions/stats` - Статистика транзакцій

## Технології

### Backend

- **Node.js** - JavaScript runtime
- **TypeScript** - Типізація
- **Express** - Web framework
- **JSON Database** - Простий файловий сховище

### Frontend

- **React 18** - UI бібліотека
- **TypeScript** - Типізація
- **Axios** - HTTP клієнт
- **Recharts** - Графіки та діаграми
- **Lucide React** - Іконки

## Особливості реалізації

### Об'єктно-орієнтований підхід

- Класи для сервісів (UserService, SubscriptionService, etc.)
- Інтерфейси для типізації
- Абстракція через DatabaseInterface

### Паттерни проектування

- **Repository Pattern** - для роботи з даними
- **Service Layer** - для бізнес-логіки
- **Factory Pattern** - для створення сервісів

### Webhook система

- Обробка зовнішніх подій
- Валідація payload
- Тестові webhook'и

## Демонстрація

1. **Створіть кількох користувачів**
2. **Додайте різні плани підписок**
3. **Створіть підписки для користувачів**
4. **Проведіть симуляцію оплат**
5. **Перевірте стан ліцензій**
6. **Проаналізуйте статистику**

Система демонструє повний цикл роботи SaaS підписок з сучасним веб-інтерфейсом та детальною аналітикою.
