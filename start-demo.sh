#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∞–º–∏ SaaS"
echo "=================================================="

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —ñ—Å–Ω—É—é—Ç—å .env —Ñ–∞–π–ª–∏
if [ ! -f ".env" ]; then
    echo "üìù –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env —Ñ–∞–π–ª—É –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏..."
    cp .env.example .env
fi

if [ ! -f "frontend/.env" ]; then
    echo "üìù –°—Ç–≤–æ—Ä–µ–Ω–Ω—è frontend/.env —Ñ–∞–π–ª—É –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏..."
    cp frontend/.env.example frontend/.env
fi

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
if [ ! -d "node_modules" ]; then
    echo "üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è backend..."
    npm install
fi

if [ ! -d "frontend/node_modules" ]; then
    echo "üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è frontend..."
    cd frontend
    npm install
    cd ..
fi

echo ""
echo "üîß –ó–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç –∑ .env —Ñ–∞–π–ª—É)..."
echo "üåê –ó–∞–ø—É—Å–∫ frontend –¥–æ–¥–∞—Ç–∫—É (–ø–æ—Ä—Ç –∑ .env —Ñ–∞–π–ª—É)..."
echo ""
echo "üì± Frontend –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://localhost:3000"
echo "üîå Backend API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://localhost:3001"
echo ""
echo "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+C –¥–ª—è –∑—É–ø–∏–Ω–∫–∏ —Å–µ—Ä–≤–µ—Ä—ñ–≤"
echo ""

# –ó–∞–ø—É—Å–∫–∞—î–º–æ –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
npm run dev:full
