# Список тест-кейсів проєкту

**Дата:** 19 листопада 2025
**Загальна кількість тестів:** 96
**Статус:** Всі тести пройдені успішно

---

## Загальна статистика

| Категорія | Кількість файлів | Кількість тестів | Статус |
|-----------|------------------|------------------|---------|
| **Backend** | 4 | 47 | PASS |
| **Frontend** | 3 | 49 | PASS |
| **Разом** | 7 | **96** | PASS |

---

## BACKEND ТЕСТИ (47 тестів)

### 1. UserService (src/services/UserService.test.ts) - 15 тестів

#### **Група: createUser** (2 тести)
1. повинен створити нового користувача
2. повинен генерувати унікальний ID для користувача

#### **Група: getUserById** (2 тести)
3. повинен отримати користувача за ID
4. повинен повернути null, якщо користувач не знайдений

#### **Група: getUserByEmail** (2 тести)
5. повинен отримати користувача за email
6. повинен повернути null, якщо користувач з таким email не знайдений

#### **Група: getAllUsers** (2 тести)
7. повинен отримати всіх користувачів
8. повинен повернути порожній масив, якщо користувачів немає

#### **Група: getAllUsersWithSubscriptions** (2 тести)
9. повинен отримати користувачів з інформацією про підписки
10. повинен повернути користувачів без підписок, якщо їх немає

#### **Група: updateUser** (4 тести)
11. повинен оновити ім'я користувача
12. повинен оновити email користувача
13. повинен оновити і ім'я, і email одночасно
14. повинен повернути null, якщо користувач не знайдений

#### **Група: deleteUser** (2 тести)
15. повинен видалити користувача
16. повинен повернути false, якщо користувач не знайдений

---

### 2. SubscriptionPlanService (src/services/SubscriptionPlanService.test.ts) - 16 тестів

#### **Група: createPlan** (2 тести)
1. повинен створити місячний план підписки
2. повинен створити річний план підписки

#### **Група: getPlanById** (2 тести)
3. повинен отримати план за ID
4. повинен повернути null, якщо план не знайдений

#### **Група: getAllPlans** (2 тести)
5. повинен отримати всі плани
6. повинен повернути порожній масив, якщо планів немає

#### **Група: updatePlan** (5 тестів)
7. повинен оновити назву плану
8. повинен оновити ціну плану
9. повинен оновити період плану
10. повинен оновити всі поля плану одночасно
11. повинен повернути null, якщо план не знайдений

#### **Група: deletePlan** (2 тести)
12. повинен видалити план
13. повинен повернути false, якщо план не знайдений

#### **Група: getPlansByPeriod** (3 тести)
14. повинен отримати всі місячні плани
15. повинен отримати всі річні плани
16. повинен повернути порожній масив, якщо планів з таким періодом немає

---

### 3. PaymentSimulationService (src/services/PaymentSimulationService.test.ts) - 10 тестів

#### **Група: simulatePayment** (6 тестів)
1. повинен симулювати оплату місячної підписки
2. повинен симулювати оплату річної підписки
3. повинен правильно розрахувати дату закінчення місячної підписки
4. повинен правильно розрахувати дату закінчення річної підписки
5. повинен викинути помилку, якщо план підписки не знайдений
6. повинен створити транзакцію з правильними даними

#### **Група: getTransactions** (4 тести)
7. повинен отримати всі транзакції
8. повинен повернути порожній масив, якщо транзакцій немає
9. повинен правильно маппити дані транзакцій

---

### 4. UserSubscriptionService (src/services/UserSubscriptionService.test.ts) - 6 тестів

#### **Група: getUserSubscriptionsAsSubscription** (6 тестів)
1. повинен отримати підписку користувача за email
2. повинен правильно конвертувати дату закінчення підписки
3. повинен повернути null, якщо підписка не знайдена
4. повинен повернути першу підписку, якщо їх кілька
5. повинен працювати з різними форматами email
6. повинен обробляти підписки з різними планами

---

## FRONTEND ТЕСТИ (49 тестів)

### 5. API Services (frontend/src/services/api.test.ts) - 14 тестів

#### **Група: usersApi** (6 тестів)
1. getAll → повинен отримати всіх користувачів
2. getAll → повинен повернути порожній масив, якщо даних немає
3. getById → повинен отримати користувача за ID
4. create → повинен створити нового користувача
5. update → повинен оновити користувача
6. delete → повинен видалити користувача

#### **Група: plansApi** (4 тести)
7. getAll → повинен отримати всі плани підписок
8. create → повинен створити новий план
9. update → повинен оновити план
10. delete → повинен видалити план

#### **Група: paymentApi** (4 тести)
11. simulate → повинен симулювати платіж
12. getTransactions → повинен отримати всі транзакції
13. getTransactions → повинен повернути порожній масив, якщо транзакцій немає
14. getUserTransactions → повинен отримати транзакції користувача

---

### 6. UsersPage Component (frontend/src/pages/UsersPage.test.tsx) - 18 тестів

#### **Група: Рендеринг** (6 тестів)
1. повинен показувати індикатор завантаження спочатку
2. повинен відобразити заголовок сторінки
3. повинен відобразити кнопку "Додати користувача"
4. повинен відобразити таблицю з користувачами
5. повинен відобразити статус підписки "Активна" для користувача з підпискою
6. повинен відобразити "Без підписки" для користувача без підписки

#### **Група: Створення користувача** (3 тести)
7. повинен відкрити діалог при натисканні "Додати користувача"
8. повинен створити нового користувача
9. повинен закрити діалог при натисканні "Скасувати"

#### **Група: Оновлення користувача** (2 тести)
10. повинен відкрити діалог редагування при натисканні кнопки редагування
11. повинен оновити користувача

#### **Група: Видалення користувача** (2 тести)
12. повинен показати підтвердження перед видаленням
13. повинен видалити користувача після підтвердження

#### **Група: Форматування даних** (2 тести)
14. повинен форматувати дату закінчення підписки
15. повинен відображати "Немає" для відсутнього плану

---

### 7. PlansPage Component (frontend/src/pages/PlansPage.test.tsx) - 17 тестів

#### **Група: Рендеринг** (8 тестів)
1. повинен показувати індикатор завантаження спочатку
2. повинен відобразити заголовок сторінки
3. повинен відобразити кнопку "Додати план"
4. повинен відобразити картки планів
5. повинен відобразити ціни планів
6. повинен відобразити період "місяць" для місячного плану
7. повинен відобразити період "рік" для річного плану
8. повинен відобразити розрахунок місячної вартості для річного плану

#### **Група: Створення плану** (4 тести)
9. повинен відкрити діалог при натисканні "Додати план"
10. повинен створити новий місячний план
11. повинен викликати create API при створенні річного плану
12. повинен закрити діалог при натисканні "Скасувати"

#### **Група: Оновлення плану** (2 тести)
13. повинен відкрити діалог редагування при натисканні кнопки редагування
14. повинен оновити план

#### **Група: Видалення плану** (2 тести)
15. повинен показати підтвердження перед видаленням
16. повинен видалити план після підтвердження

#### **Група: Функції утиліт** (1 тест)
17. повинен правильно розраховувати місячну вартість для річного плану

---

## Запуск тестів

### Backend тести
```bash
# Запустити всі backend тести
npm test

# Запустити в режимі спостереження
npm run test:watch

# Запустити з покриттям коду
npm run test:coverage
```

### Frontend тести
```bash
# Запустити всі frontend тести
npm run frontend:test

# Запустити в інтерактивному режимі
cd frontend && npm test
```

### Запустити всі тести разом
```bash
# Backend
npm test

# Frontend
npm run frontend:test
```

---

## Покриття тестами

### Backend:
- **UserService** - повне покриття всіх методів (15 тестів)
- **SubscriptionPlanService** - повне покриття всіх методів (16 тестів)
- **PaymentSimulationService** - повне покриття всіх методів (10 тестів)
- **UserSubscriptionService** - повне покриття всіх методів (6 тестів)

### Frontend:
- **API Services** - повне покриття всіх API методів (14 тестів)
- **UsersPage** - повне покриття UI та взаємодій (18 тестів)
- **PlansPage** - повне покриття UI та взаємодій (17 тестів)

---

## Технології тестування

### Backend:
- **Jest** - фреймворк для тестування
- **ts-jest** - підтримка TypeScript
- **Mocking** - мокування залежностей (DatabaseService)

### Frontend:
- **Jest** - фреймворк для тестування
- **React Testing Library** - тестування React компонентів
- **@testing-library/user-event** - симуляція користувацьких подій
- **@testing-library/jest-dom** - додаткові матчери для DOM

---

## Результати

**Всі 96 тестів пройшли успішно**

- **Backend:** 47/47 тестів
- **Frontend:** 49/49 тестів
- **Час виконання backend:** ~1.3s
- **Час виконання frontend:** ~41s

---

## Примітки

1. Всі тести використовують мокування для ізоляції від реальних залежностей
2. Тести покривають позитивні та негативні сценарії
3. Фронтенд тести перевіряють як рендеринг, так і взаємодію користувача
4. Backend тести перевіряють бізнес-логіку всіх сервісів
5. Використовуються best practices для тестування (AAA pattern, чіткі назви, незалежність тестів)
